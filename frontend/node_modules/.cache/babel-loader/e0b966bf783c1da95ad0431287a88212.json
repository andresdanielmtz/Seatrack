{"ast":null,"code":"import _classCallCheck from \"/Users/kapigoku/Documents/Cosas/Programacio\\u0301n/Phyton/Seatrack/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kapigoku/Documents/Cosas/Programacio\\u0301n/Phyton/Seatrack/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kapigoku/Documents/Cosas/Programacio\\u0301n/Phyton/Seatrack/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _get from \"/Users/kapigoku/Documents/Cosas/Programacio\\u0301n/Phyton/Seatrack/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/kapigoku/Documents/Cosas/Programacio\\u0301n/Phyton/Seatrack/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kapigoku/Documents/Cosas/Programacio\\u0301n/Phyton/Seatrack/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n/**\n * @module ol/render/canvas/ImageBuilder\n */\nimport CanvasBuilder from './Builder.js';\nimport CanvasInstruction from './Instruction.js';\nvar CanvasImageBuilder = /*#__PURE__*/function (_CanvasBuilder) {\n  _inherits(CanvasImageBuilder, _CanvasBuilder);\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   */\n  function CanvasImageBuilder(tolerance, maxExtent, resolution, pixelRatio) {\n    var _this;\n    _classCallCheck(this, CanvasImageBuilder);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CanvasImageBuilder).call(this, tolerance, maxExtent, resolution, pixelRatio));\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    _this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    _this.image_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.imagePixelRatio_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.anchorX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.anchorY_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.height_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.opacity_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.originX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.originY_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    _this.rotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.rotation_ = undefined;\n\n    /**\n     * @private\n     * @type {import(\"../../size.js\").Size|undefined}\n     */\n    _this.scale_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    _this.width_ = undefined;\n\n    /**\n     * @private\n     * @type {\"declutter\"|\"obstacle\"|\"none\"|undefined}\n     */\n    _this.declutterMode_ = undefined;\n\n    /**\n     * Data shared with a text builder for combined decluttering.\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterImageWithText}\n     */\n    _this.declutterImageWithText_ = undefined;\n    return _this;\n  }\n\n  /**\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   */\n  _createClass(CanvasImageBuilder, [{\n    key: \"drawPoint\",\n    value: function drawPoint(pointGeometry, feature) {\n      if (!this.image_) {\n        return;\n      }\n      this.beginGeometry(pointGeometry, feature);\n      var flatCoordinates = pointGeometry.getFlatCoordinates();\n      var stride = pointGeometry.getStride();\n      var myBegin = this.coordinates.length;\n      var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n      this.instructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_ * this.imagePixelRatio_, this.originY_ * this.imagePixelRatio_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_], Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterMode_, this.declutterImageWithText_]);\n      this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterMode_, this.declutterImageWithText_]);\n      this.endGeometry(feature);\n    }\n    /**\n     * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} multiPointGeometry MultiPoint geometry.\n     * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n     */\n  }, {\n    key: \"drawMultiPoint\",\n    value: function drawMultiPoint(multiPointGeometry, feature) {\n      if (!this.image_) {\n        return;\n      }\n      this.beginGeometry(multiPointGeometry, feature);\n      var flatCoordinates = multiPointGeometry.getFlatCoordinates();\n      var stride = multiPointGeometry.getStride();\n      var myBegin = this.coordinates.length;\n      var myEnd = this.appendFlatPointCoordinates(flatCoordinates, stride);\n      this.instructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_ * this.imagePixelRatio_, this.anchorY_ * this.imagePixelRatio_, Math.ceil(this.height_ * this.imagePixelRatio_), this.opacity_, this.originX_ * this.imagePixelRatio_, this.originY_ * this.imagePixelRatio_, this.rotateWithView_, this.rotation_, [this.scale_[0] * this.pixelRatio / this.imagePixelRatio_, this.scale_[1] * this.pixelRatio / this.imagePixelRatio_], Math.ceil(this.width_ * this.imagePixelRatio_), this.declutterMode_, this.declutterImageWithText_]);\n      this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.height_, this.opacity_, this.originX_, this.originY_, this.rotateWithView_, this.rotation_, this.scale_, this.width_, this.declutterMode_, this.declutterImageWithText_]);\n      this.endGeometry(feature);\n    }\n    /**\n     * @return {import(\"../canvas.js\").SerializableInstructions} the serializable instructions.\n     */\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      this.reverseHitDetectionInstructions();\n      // FIXME this doesn't really protect us against further calls to draw*Geometry\n      this.anchorX_ = undefined;\n      this.anchorY_ = undefined;\n      this.hitDetectionImage_ = null;\n      this.image_ = null;\n      this.imagePixelRatio_ = undefined;\n      this.height_ = undefined;\n      this.scale_ = undefined;\n      this.opacity_ = undefined;\n      this.originX_ = undefined;\n      this.originY_ = undefined;\n      this.rotateWithView_ = undefined;\n      this.rotation_ = undefined;\n      this.width_ = undefined;\n      return _get(_getPrototypeOf(CanvasImageBuilder.prototype), \"finish\", this).call(this);\n    }\n    /**\n     * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n     * @param {Object} [sharedData] Shared data.\n     */\n  }, {\n    key: \"setImageStyle\",\n    value: function setImageStyle(imageStyle, sharedData) {\n      var anchor = imageStyle.getAnchor();\n      var size = imageStyle.getSize();\n      var origin = imageStyle.getOrigin();\n      this.imagePixelRatio_ = imageStyle.getPixelRatio(this.pixelRatio);\n      this.anchorX_ = anchor[0];\n      this.anchorY_ = anchor[1];\n      this.hitDetectionImage_ = imageStyle.getHitDetectionImage();\n      this.image_ = imageStyle.getImage(this.pixelRatio);\n      this.height_ = size[1];\n      this.opacity_ = imageStyle.getOpacity();\n      this.originX_ = origin[0];\n      this.originY_ = origin[1];\n      this.rotateWithView_ = imageStyle.getRotateWithView();\n      this.rotation_ = imageStyle.getRotation();\n      this.scale_ = imageStyle.getScaleArray();\n      this.width_ = size[0];\n      this.declutterMode_ = imageStyle.getDeclutterMode();\n      this.declutterImageWithText_ = sharedData;\n    }\n  }]);\n  return CanvasImageBuilder;\n}(CanvasBuilder);\nexport default CanvasImageBuilder;","map":null,"metadata":{},"sourceType":"module"}